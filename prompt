I already have a Next.js client-side chatbot called UniqueSchoolsFAQBot.

Current features:

Uses Groq LLaMA 3.3 via OpenAI-compatible API

Uses RAG with an in-memory FAQ knowledge base

Calculates semantic similarity manually

Sends matched context into the system prompt

UI is already complete and production-ready

ğŸ¯ OBJECTIVE

Extend the existing chatbot so that:

âœ… Users can upload multiple files at once
âœ… Supported formats:

PDF

DOCX

TXT

CSV (optional bonus)

âœ… The AI:

Extracts all text from uploaded files

Chunks the text

Generates embeddings

Stores embeddings in memory (MVP)

Retrieves relevant chunks at query time

Answers questions only using uploaded documents

ğŸ§© TECH REQUIREMENTS

Frontend

Add multi-file upload UI

Show uploaded file names

Allow asking questions after upload

Backend (Next.js App Router)

Create API route:

/app/api/upload/route.ts


Handle multipart/form-data

Extract text from:

PDFs (pdf-parse)

DOCX (mammoth)

TXT (native)

Support multiple files in one request

RAG Pipeline

Extract text

Chunk text (500 tokens, 100 overlap)

Generate embeddings using:

https://api.groq.com/openai/v1/embeddings
model: text-embedding-3-large


Store vectors in memory

On user query:

Embed query

Perform cosine similarity

Retrieve top-K chunks

Inject retrieved chunks into the system prompt

ğŸ“œ SYSTEM PROMPT BEHAVIOR

When documents are uploaded:

The AI must only answer from uploaded documents

If the answer is not found, respond with:

â€œThe uploaded documents do not contain this information.â€

Include document citations in the response:

Source 1: Uploaded File
Source 2: Uploaded File

ğŸ§ª EXPECTED OUTPUT

You must generate:

âœ… Frontend code changes (file input + handler)

âœ… Backend API route code

âœ… Text extraction logic

âœ… Chunking utility

âœ… Embedding + vector store logic

âœ… Cosine similarity search

âœ… Updated Groq chat completion call

âœ… Clean, well-commented TypeScript code

âœ… No pseudo-code â€” only runnable code

âš ï¸ IMPORTANT CONSTRAINTS

Do NOT rewrite existing UI unless necessary

Do NOT remove existing FAQ-based RAG

Add file-based RAG alongside FAQ RAG

Prefer clarity over abstraction

Follow Next.js App Router conventions

Use TypeScript everywhere

ğŸ§  BONUS (Optional but Preferred)

Add a toggle:

â€œUse Company FAQâ€

â€œUse Uploaded Documentsâ€

â€œUse Bothâ€

Add loading states for file processing

Add basic file size validation

ğŸ FINAL GOAL

Produce production-ready code that transforms my chatbot into an enterprise-grade document-aware AI assistant similar to ChatGPTâ€™s file upload feature.